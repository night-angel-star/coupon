{"version":3,"file":"static/js/365.ff38f022.chunk.js","mappings":"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","sources":["services/auth.service.js","pages/auth/Login.jsx","redux/actions/auth.js","redux/actions/route.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\nimport API_URL from \"./API\";\r\n\r\nconst login = async (payload) => {\r\n  try {\r\n    const result = await axios.post(`${API_URL}/coupon_user/login`, payload);\r\n    if (result.data.status === 201) {\r\n      return result.data.result;\r\n    } else {\r\n      return \"fail\";\r\n    }\r\n  } catch (err) {\r\n    console.log(err);\r\n    return \"fail\";\r\n  }\r\n};\r\n\r\nconst shopService = {\r\n  login,\r\n};\r\n\r\nexport default shopService;\r\n","import { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { login } from \"../../redux/actions/auth\";\r\nimport { setRoute } from \"../../redux/actions/route\";\r\n\r\nexport const Login = () => {\r\n  const dispatch = useDispatch();\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [error, setError] = useState(\"\");\r\n  const logged = useSelector((state) => state.auth.isLoggedIn);\r\n  if (logged) {\r\n    const navigateTohome = () => {\r\n      dispatch(setRoute(\"home\"));\r\n    };\r\n    setTimeout(navigateTohome, 10);\r\n  }\r\n\r\n  const handleLogin = (e) => {\r\n    e.preventDefault();\r\n    if (!username || !password) {\r\n      setError(\"Username and password required!\");\r\n      return;\r\n    }\r\n    dispatch(login({ name: username, password: password })).then((result) => {\r\n      if (result) {\r\n        dispatch(setRoute(\"home\"));\r\n      }\r\n    });\r\n    setUsername(\"\");\r\n    setPassword(\"\");\r\n    setError(\"\");\r\n  };\r\n  return (\r\n    <div className=\"flex justify-center items-center h-[100vh] \">\r\n      <div className=\" p-8 rounded\">\r\n        <h2 className=\"text-2xl font-bold mb-4\">Log In</h2>\r\n        {error && <p className=\"text-red-500 mb-4\">{error}</p>}\r\n        <form onSubmit={handleLogin}>\r\n          <div className=\"mb-4\">\r\n            <label\r\n              htmlFor=\"username\"\r\n              className=\"block mb-2 text-sm font-medium text-gray-600\"\r\n            >\r\n              Username\r\n            </label>\r\n            <input\r\n              type=\"username\"\r\n              id=\"username\"\r\n              className=\"w-full p-2 border border-gray-300 rounded\"\r\n              value={username}\r\n              onChange={(e) => setUsername(e.target.value)}\r\n            />\r\n          </div>\r\n          <div className=\"mb-4\">\r\n            <label\r\n              htmlFor=\"password\"\r\n              className=\"block mb-2 text-sm font-medium text-gray-600\"\r\n            >\r\n              Password\r\n            </label>\r\n            <input\r\n              type=\"password\"\r\n              id=\"password\"\r\n              className=\"w-full p-2 border border-gray-300 rounded\"\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n            />\r\n          </div>\r\n          <button\r\n            type=\"submit\"\r\n            className=\"w-full bg-blue-500 text-white py-2 px-4 rounded hover:bg-blue-600\"\r\n          >\r\n            Log In\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import { LOGIN, LOGOUT } from \"./types\";\r\nimport authService from \"../../services/auth.service\";\r\n\r\nexport const login = (payload) => async (dispatch) => {\r\n  try {\r\n    const result = await authService.login({\r\n      user: payload.name,\r\n      password: payload.password,\r\n      type: \"Phone\",\r\n    });\r\n    if (result === \"fail\") {\r\n      alert(\"User name or password incorrect\");\r\n      return false;\r\n    }\r\n    if (result) {\r\n      localStorage.setItem(\"login_info\", JSON.stringify(result));\r\n    } else {\r\n      localStorage.removeItem(\"login_info\");\r\n    }\r\n    await dispatch({\r\n      type: LOGIN,\r\n      payload: payload.name,\r\n    });\r\n\r\n    // console.log(result);\r\n\r\n    return true;\r\n  } catch (err) {\r\n    console.log(err);\r\n    return false;\r\n  }\r\n};\r\n\r\nexport const logout = () => ({\r\n  type: LOGOUT,\r\n});\r\n","import { SET_ROUTE } from \"./types\";\r\n\r\nexport const setRoute = (pageName, param = null) => ({\r\n  type: SET_ROUTE,\r\n  payload: {\r\n    name: pageName,\r\n    param: param,\r\n  },\r\n});\r\n"],"names":["login","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","payload","result","wrap","_context","prev","next","axios","post","concat","API_URL","sent","data","status","abrupt","t0","console","log","stop","_x","apply","arguments","Login","dispatch","useDispatch","_useState","useState","_useState2","_slicedToArray","username","setUsername","_useState3","_useState4","password","setPassword","_useState5","_useState6","error","setError","useSelector","state","auth","isLoggedIn","setTimeout","setRoute","_jsx","className","children","_jsxs","onSubmit","e","preventDefault","name","authService","user","type","alert","localStorage","setItem","JSON","stringify","removeItem","LOGIN","then","htmlFor","id","value","onChange","target","pageName","param","length","undefined","SET_ROUTE"],"sourceRoot":""}