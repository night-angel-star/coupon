"use strict";(self.webpackChunkreact_e_shop=self.webpackChunkreact_e_shop||[]).push([[390],{68658:function(e,n,t){var r=t(93433),o=t(74165),c=t(15861),u=t(29439),i=t(72791),a=t(57960),s=t(31773),f=t(91082),l=t(14692),d=t(23293),h=t(36795),p=t(82464),v=t(33855),Z=t(53192),m=t(16243),x=t(71755),g=t(80184);n.Z=function(e){var n=(0,v.I0)(),t=(0,i.useState)(!1),k=(0,u.Z)(t,2),Y=k[0],w=k[1],j=e.columns,y=e.showAction,b=(0,v.v9)((function(e){return e.route.name})),C=(0,v.v9)((function(e){return e.auth.isLoggedIn?e.auth.user.permission:{}})),D=(0,v.v9)((function(e){return e.auth.isLoggedIn?e.auth.user.level:-1})),M=C[b]?C[b].edit:D,N=C[b]?C[b].del:D,L=(0,v.v9)((function(e){return e.search})),S=L.key,I=L.value,P=(0,v.v9)((function(e){return e.data.data})),_=(0,i.useState)(P),A=(0,u.Z)(_,2),E=A[0],T=A[1];(0,i.useEffect)((function(){S.length>0?T(P.filter((function(e){return!!e[S]&&("string"===typeof e[S]?e[S].toLowerCase().indexOf(I.toLowerCase())>-1:e[S].toString()===I)}))):T(P)}),[S,I,P]),(0,i.useEffect)((function(){if(b){w(!0);var e=function(){var e=(0,c.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n((0,Z.Nk)()),n((0,Z.Yu)(b)).then((function(){w(!1)})).catch((function(){w(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n((0,x.D)()),e()}}),[n,b]);var V=[].concat((0,r.Z)(j),[{title:"Action",key:"action",fixed:"right",render:function(e){return(0,g.jsxs)(s.Z,{size:"middle",children:[1===M&&(0,g.jsx)(h.Z,{className:"cursor-pointer",onClick:function(){return t=e.key,void n((0,m.p)({id:t,title:"Edit ".concat(b),show:!0}));var t}}),(0,g.jsx)(f.Z,{placement:"left",title:"Sure to delete?",description:"All levels and members below this level will be deleted.",onConfirm:function(){return t=e.key,void(1===N?(w(!0),n((0,Z.NU)(b,{id:t})).then((function(){return w(!1)})).catch((function(){a.ZP.error("Problem"),w(!1)}))):a.ZP.open({type:"warning",content:"You have no permission"}));var t},okText:"Yes",cancelText:"No",children:1===N&&(0,g.jsx)(p.Z,{twoToneColor:"#eb2f96",className:"cursor-pointer"})})]})}}]);return(0,g.jsx)(l.Z,{spinning:Y,children:(0,g.jsx)(d.Z,{columns:y?V:j,dataSource:E})})}},16390:function(e,n,t){t.r(n),t.d(n,{LogView:function(){return Y}});var r=t(74165),o=t(15861),c=t(93433),u=t(68658),i=t(45322),a=t(66106),s=t(31773),f=t(81529),l=t(97892),d=t.n(l),h=t(72426),p=t.n(h),v=t(33855),Z=t(53192),m=t(6793),x=t(80184),g="YYYY-MM-DD",k=i.Z.RangePicker,Y=function(){var e=(0,v.I0)(),n=f.Z.log,t=n.reduce((function(e,n){return[].concat((0,c.Z)(e),[n.key])}),[]),i=function(){var n=(0,o.Z)((0,r.Z)().mark((function n(t){var o,c;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=t[0].format(g)+" 00:00:00",c=t[1].format(g)+" 23:59:59",n.prev=2,n.next=5,e((0,Z.Yu)("log","?from=".concat(o,"&to=").concat(c)));case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(2),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[2,7]])})));return function(e){return n.apply(this,arguments)}}();return(0,x.jsxs)("div",{children:[(0,x.jsx)(a.Z,{justify:"end",className:"p-2",children:(0,x.jsxs)(s.Z,{children:[(0,x.jsx)(k,{defaultValue:[d()(p()().format("YYYY-MM-DD"),g),d()(p()().format("YYYY-MM-DD"),g)],onChange:i}),(0,x.jsx)(m.Z,{fields:t})]})}),(0,x.jsx)(u.Z,{columns:n})]})};n.default=Y}}]);
//# sourceMappingURL=390.19e153f1.chunk.js.map