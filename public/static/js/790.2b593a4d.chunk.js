"use strict";(self.webpackChunkreact_e_shop=self.webpackChunkreact_e_shop||[]).push([[790],{6793:function(e,t,n){var r=n(29439),a=n(67987),o=n(31773),i=n(66818),c=n(86005),d=n(2641),u=n(11730),s=n(33855),l=n(71755),f=n(80184);t.Z=function(e){var t=e.fields,n=(0,s.I0)(),m=""!==(0,s.v9)((function(e){return e.search.key})),p=a.Z.useForm(),h=(0,r.Z)(p,1)[0];return(0,f.jsx)(a.Z,{onFinish:function(e){m?(n((0,l.D)()),h.resetFields()):n((0,l.T)(e))},form:h,children:(0,f.jsxs)(o.Z,{children:[(0,f.jsx)(a.Z.Item,{className:"my-0",name:"key",rules:[{required:!0,message:"Please select search key!"}],children:(0,f.jsx)(i.Z,{style:{width:120},options:t.map((function(e){return{value:e,label:e}})),placeholder:"Select Column"})}),(0,f.jsx)(a.Z.Item,{className:"my-0",name:"value",rules:[{required:!0,message:"Please input search str!"}],children:(0,f.jsx)(c.Z,{placeholder:"Input Search Str"})}),(0,f.jsx)(a.Z.Item,{className:"my-0",children:(0,f.jsx)(d.ZP,{type:m?"default":"primary",shape:"circle",icon:(0,f.jsx)(u.Z,{}),htmlType:"submit"})})]})})}},81529:function(e,t,n){var r=n(20952),a=n(80184),o={level:[{title:"Id",dataIndex:"id",key:"id"},{title:"Name",dataIndex:"name",key:"name"}],member:[{title:"No",dataIndex:"no",key:"no"},{title:"Name",dataIndex:"name",key:"name"},{title:"Level",dataIndex:"level",key:"level"},{title:"Parent",dataIndex:"parent",key:"parent"}],goods:[{title:"No",dataIndex:"no",key:"no",fixed:"left"},{title:"Name",dataIndex:"name",key:"name",fixed:"left"},{title:"Nvid",dataIndex:"nvid",key:"nvid"},{title:"Keyword1",dataIndex:"keyword1",key:"keyword1"},{title:"Keyword2",dataIndex:"keyword2",key:"keyword2"},{title:"Keyword3",dataIndex:"keyword3",key:"keyword3"}],proxy:[{title:"No",dataIndex:"no",key:"no"},{title:"IP",dataIndex:"ip",key:"ip"},{title:"Port",dataIndex:"port",key:"port"},{title:"Username",dataIndex:"user",key:"user"},{title:"Password",dataIndex:"password",key:"password"}],browser:[{title:"No",dataIndex:"no",key:"no"},{title:"Name",dataIndex:"name",key:"name"},{title:"Agent",dataIndex:"agent",key:"agent"}],login:[{title:"No",dataIndex:"no",key:"no"},{title:"Username",dataIndex:"user",key:"user"},{title:"Password",dataIndex:"password",key:"password"}],machine:[{title:"No",dataIndex:"no",key:"no"},{title:"IP",dataIndex:"ip",key:"ip"},{title:"Type",dataIndex:"type",key:"type"},{title:"Machine ID",dataIndex:"machine_id",key:"machine_id"},{title:"Last Access",dataIndex:"last_access",key:"last_access"}],surfing:[{title:"No",dataIndex:"no",key:"no"},{title:"Name",dataIndex:"name",key:"name"},{title:"URL",dataIndex:"url",key:"url",render:function(e){return(0,a.jsx)("a",{href:e,children:e})}}],history:[{title:"No",dataIndex:"no",key:"no"},{title:"Time",dataIndex:"time",key:"time"},{title:"Machine",dataIndex:"machine",key:"machine"},{title:"Action",dataIndex:"action",key:"action"}],log:[{title:"No",dataIndex:"no",key:"no"},{title:"Time",dataIndex:"time",key:"time"},{title:"User",dataIndex:"user",key:"user"},{title:"Action",dataIndex:"action",key:"action"}],job:[{title:"No",dataIndex:"no",key:"no",fixed:"left"},{title:"Name",dataIndex:"name",key:"name",fixed:"left"},{title:"login",dataIndex:"login_user",key:"login_user",fixed:"left"},{title:"machine",dataIndex:"machine_id",key:"machine_id",fixed:"left"},{title:"proxy",dataIndex:"proxy_ip",key:"proxy_ip"},{title:"browser",dataIndex:"browser_name",key:"browser_name"},{title:"Goods",dataIndex:"goods",key:"goods",render:function(e){return e&&e.map((function(e,t){return(0,a.jsx)(r.Z,{children:e.name},t)}))}},{title:"Surfing",dataIndex:"surfing",key:"surfing",render:function(e){return e&&e.map((function(e,t){return(0,a.jsx)(r.Z,{children:e.name},t)}))}}],coupon_category:[{title:"No",dataIndex:"no",key:"no"},{title:"Name",dataIndex:"name",key:"name"}],coupon:[{title:"No",dataIndex:"no",key:"no"},{title:"Name",dataIndex:"name",key:"name"},{title:"Description",dataIndex:"desc",key:"desc"},{title:"Category",dataIndex:"category",key:"category"},{title:"Brand",dataIndex:"brand",key:"brand"},{title:"Price",dataIndex:"price",key:"price"},{title:"Discount(%)",dataIndex:"discount",key:"discount"}],brand:[{title:"No",dataIndex:"no",key:"no"},{title:"Name",dataIndex:"name",key:"name"}]};t.Z=o},61790:function(e,t,n){n.r(t),n.d(t,{BrandManage:function(){return N},default:function(){return D}});var r=n(93433),a=n(74165),o=n(15861),i=n(29439),c=n(72791),d=n(57960),u=n(31773),s=n(60573),l=n(91082),f=n(14692),m=n(23293),p=n(36795),h=n(82464),g=n(33855),y=n(53192),Z=n(16243),x=n(71755),k=n(84635),v=n(80184),I=function(e){var t=(0,g.I0)(),n=(0,c.useState)(!1),I=(0,i.Z)(n,2),P=I[0],w=I[1],_=e.columns,b=e.showAction,j=(0,g.v9)((function(e){return e.route.name})),N=(0,g.v9)((function(e){return e.auth.isLoggedIn?e.auth.user.permission:{}})),D=(0,g.v9)((function(e){return e.auth.isLoggedIn?e.auth.user.level:-1})),U=N[j]?N[j].edit:D,z=N[j]?N[j].del:D,E=(0,g.v9)((function(e){return e.search})),S=E.key,A=E.value,L=(0,g.v9)((function(e){return e.data.data})),C=(0,c.useState)(L),T=(0,i.Z)(C,2),G=T[0],R=T[1];(0,c.useEffect)((function(){S.length>0?R(L.filter((function(e){return!!e[S]&&("string"===typeof e[S]?e[S].toLowerCase().indexOf(A.toLowerCase())>-1:e[S].toString()===A)}))):R(L)}),[S,A,L]),(0,c.useEffect)((function(){if(j){w(!0);var e=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t((0,y.Nk)()),t((0,y.Yu)(j)).then((function(){w(!1)})).catch((function(){w(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t((0,x.D)()),e()}}),[t,j]);var B=[].concat((0,r.Z)(_),[{title:"Image",key:"image",render:function(e){return(0,v.jsxs)(u.Z,{size:"small",children:[(0,v.jsx)(s.Z,{width:50,src:"".concat(k.Z,"uploads/").concat(e.image1),alt:e.image1}),e.image2&&(0,v.jsx)(s.Z,{width:50,src:"".concat(k.Z,"uploads/").concat(e.image2),alt:e.image2}),e.image3&&(0,v.jsx)(s.Z,{width:50,src:"".concat(k.Z,"uploads/").concat(e.image3),alt:e.image3})]})}},{title:"Action",key:"action",render:function(e){return(0,v.jsxs)(u.Z,{size:"middle",children:[1===U&&(0,v.jsx)(p.Z,{className:"cursor-pointer",onClick:function(){return n=e.key,void t((0,Z.p)({id:n,title:"Edit ".concat(j),show:!0}));var n}}),(0,v.jsx)(l.Z,{placement:"left",title:"Sure to delete?",description:"All levels and members below this level will be deleted.",onConfirm:function(){return n=e.key,void(1===z?(w(!0),t((0,y.NU)(j,{id:n})).then((function(){return w(!1)})).catch((function(){d.ZP.error("Problem"),w(!1)}))):d.ZP.open({type:"warning",content:"You have no permission"}));var n},okText:"Yes",cancelText:"No",children:1===z&&(0,v.jsx)(h.Z,{twoToneColor:"#eb2f96",className:"cursor-pointer"})})]})}}]);return(0,v.jsx)(f.Z,{spinning:P,children:(0,v.jsx)(m.Z,{columns:b?B:_,dataSource:G})})},P=n(66106),w=n(2641),_=n(79286),b=n(6793),j=n(81529),N=function(){var e=(0,g.I0)(),t=(0,g.v9)((function(e){return e.auth.isLoggedIn?e.auth.user.level:{}})),n=j.Z.brand,a=n.reduce((function(e,t){return[].concat((0,r.Z)(e),[t.key])}),[]);return(0,v.jsxs)("div",{children:[(0,v.jsx)(P.Z,{justify:"end",className:"p-2",children:(0,v.jsxs)(u.Z,{children:[(0,v.jsx)(b.Z,{fields:a}),1===t&&(0,v.jsx)(w.ZP,{type:"primary",icon:(0,v.jsx)(_.Z,{}),onClick:function(){e((0,Z.p)({id:0,title:"Add Brand",show:!0}))},children:"Add"})]})}),(0,v.jsx)(I,{columns:n,showAction:!0})]})},D=N},65857:function(e,t,n){n.d(t,{x:function(){return u},k:function(){return s}});var r=n(4942),a=n(1413),o=n(6803),i=n(31243),c=n(84635),d={login:function(e){return i.Z.post(c.Z+"login",e).then((function(e){return e.data.accessToken&&localStorage.setItem("user",JSON.stringify(e.data)),e.data}))},logout:function(){localStorage.removeItem("user"),localStorage.removeItem("persist:root")}},u=function(e,t){return function(n){return d.login(e,t).then((function(e){var t={};1===e.user.level_id&&(t={level:{view:1,add:1,edit:1,del:1}}),e.user.role.map((function(e){return t=(0,a.Z)((0,a.Z)({},t),{},(0,r.Z)({},e.page,(0,a.Z)((0,a.Z)({},t[e.page]),{},(0,r.Z)({},e.operation,e.permission))))}));var i={id:e.user.id,name:e.user.name,level:e.user.level_id,permission:t,parent:e.user.parent,token:e.access_token};return localStorage.setItem("token",e.access_token),n({type:o.XP,payload:{user:i}}),Promise.resolve()}),(function(e){var t="";switch(e.code){case"ERR_NETWORK":t="Network problem.";break;case"ERR_BAD_REQUEST":t=401===e.response.data.status?"User name or password is incorrect.":"Unknown error. Please contact admin.";break;default:t="Unknown error. Please contact admin."}return n({type:o.Qj}),n({type:o.Nd,payload:t}),Promise.reject()}))}},s=function(){return function(e){d.logout(),localStorage.clear(),e({type:o.Nv}),e({type:o.LD,payload:{name:"auth/login",param:null}})}}},53192:function(e,t,n){n.d(t,{Id:function(){return u},NU:function(){return s},Nk:function(){return l},Yu:function(){return d}});var r=n(6803),a=n(17992),o=n(57960),i=n(10297),c=n(65857),d=function(e,t){return function(n){return a.Z.getList(e,t).then((function(t){var a=(0,i.Z)(t.result,e);return n({type:r.mn,payload:a}),Promise.resolve()}),(function(e){return 401===e.response.data.status?(o.ZP.error("Unauthorized"),n((0,c.k)())):(console.log(e),o.ZP.error("Get Data Exception")),Promise.reject()}))}},u=function(e,t,n){return function(r){return a.Z.add(e,t,n).then((function(t){if(201!==t.status&&200!==t.status)return o.ZP.error("Add Data Problem."),Promise.reject("Server problem.");r(d(e)).then((function(){return Promise.resolve()})).catch((function(e){return o.ZP.error("Get Data Problem."),console.log(e),Promise.reject()}))}),(function(e){return 401===e.response.data.status?(o.ZP.error("Unauthorized"),r((0,c.k)())):(console.log(e),o.ZP.error("Add Data Exception")),Promise.reject(e)}))}},s=function(e,t){return function(n){return a.Z.del(e,t).then((function(t){if(201!==t.status)return Promise.reject();n(d(e)).then((function(){return Promise.resolve()})).catch((function(){return Promise.reject()}))}),(function(e){return Promise.reject(e)}))}},l=function(){return{type:r.hU}}},16243:function(e,t,n){n.d(t,{c:function(){return o},p:function(){return a}});var r=n(6803),a=function(e){return{type:r.iA,payload:e}},o=function(e){return{type:r.i_,payload:e}}},71755:function(e,t,n){n.d(t,{D:function(){return o},T:function(){return a}});var r=n(6803),a=function(e){return{type:r.YA,payload:e}},o=function(){return{type:r.$S}}},84635:function(e,t){t.Z="http://45.142.215.75/"},17992:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(31243);function a(){var e=localStorage.getItem("token");return e?{Authorization:e}:{}}var o=n(57960),i=n(84635),c=n(65857),d=n(63237),u=n(6803),s=(0,d.Z)().store,l=function(e,t){return r.Z.post(i.Z+("login"===e?"nvlogin":e)+"/edit",t,{headers:a()}).then((function(e){return e.data}))},f={getList:function(e,t){var n=i.Z+("login"===e?"nvlogin":e)+"/view";return t&&(n+=t),r.Z.get(n,{headers:a()}).then((function(e){return e.data}))},add:function(e,t,n){return n?l(e,t):r.Z.post(i.Z+("login"===e?"nvlogin":e)+"/add",t,{headers:a()}).then((function(e){return e.data}))},edit:l,del:function(e,t){return r.Z.post(i.Z+("login"===e?"nvlogin":e)+"/delete",t,{headers:a()}).then((function(e){return e.data})).catch((function(e){401===e.response.data.status?(o.ZP.error("Unauthorized"),s.dispatch((0,c.k)())):(console.log(e),o.ZP.error("Del Data Exception"))}))},getFamily:function(){return r.Z.post(i.Z+"member/family",{},{headers:a()}).then((function(e){return e.data})).catch((function(e){401===e.response.data.status?(o.ZP.error("Unauthorized"),s.dispatch((0,c.k)())):(console.log(e),o.ZP.error("Get Data Exception"))}))},getPermission:function(e){return r.Z.post(i.Z+"level/get",{id:e},{headers:a()}).then((function(e){return e.data})).catch((function(e){401===e.response.data.status?(o.ZP.error("Unauthorized"),s.dispatch((0,c.k)())):(console.log(e),o.ZP.error("Get Data Exception"))}))},getJobLogin:function(){return r.Z.post(i.Z+"job/getlogin",{},{headers:a()}).then((function(e){return e.data})).catch((function(e){401===e.response.data.status?(o.ZP.error("Unauthorized"),s.dispatch((0,c.k)())):(console.log(e),o.ZP.error("Get Data Exception"))}))},getCategory:function(){return r.Z.get(i.Z+"coupon_category/view",{headers:a()}).then((function(e){return e.data.result})).catch((function(e){401===e.response.data.status?(o.ZP.error("Unauthorized"),s.dispatch((0,c.k)())):(console.log(e),o.ZP.error("Get Data Exception"))}))},getCategoryForParentSelect:function(e){return r.Z.post(i.Z+"coupon_category/getwillparent",{id:e},{headers:a()}).then((function(e){return e.data.result})).catch((function(e){401===e.response.data.status?(o.ZP.error("Unauthorized"),s.dispatch((0,c.k)())):(console.log(e),o.ZP.error("Get Data Exception"))}))},getCategoryForCoupon:function(){return r.Z.get(i.Z+"coupon_category/getforcoupon",{headers:a()}).then((function(e){return e.data.result})).catch((function(e){401===e.response.data.status?(o.ZP.error("Unauthorized"),s.dispatch((0,c.k)())):(console.log(e),o.ZP.error("Get Data Exception"))}))},getBrands:function(){return r.Z.get(i.Z+"brand/view",{headers:a()}).then((function(e){return e.data.result})).catch((function(e){401===e.response.data.status?(o.ZP.error("Unauthorized"),s.dispatch((0,c.k)())):(console.log(e),o.ZP.error("Get Data Exception"))}))},changeStatus:function(e){return r.Z.post(i.Z+"coupon_category/change_status",e,{headers:a()}).then((function(e){return console.log(e.data.result),s.dispatch({type:u.mn,payload:e.data.result}),e.data})).catch((function(e){401===e.response.data.status?(o.ZP.error("Unauthorized"),s.dispatch((0,c.k)())):(console.log(e),o.ZP.error("Get Data Exception"))}))},delUpload:function(e){return r.Z.post(i.Z+"file/delete",e,{headers:a()}).then((function(e){return e.data})).catch((function(e){401===e.response.data.status?(o.ZP.error("Unauthorized"),s.dispatch((0,c.k)())):(console.log(e),o.ZP.error("Del Data Exception"))}))},getAdverts:function(){return r.Z.get(i.Z+"file/getadverts",{headers:a()}).then((function(e){return e.data})).catch((function(e){401===e.response.data.status?(o.ZP.error("Unauthorized"),s.dispatch((0,c.k)())):(console.log(e),o.ZP.error("Del Data Exception"))}))},delAdvert:function(e){return r.Z.post(i.Z+"file/deleteadvert",e,{headers:a()}).then((function(e){return e.data})).catch((function(e){401===e.response.data.status?(o.ZP.error("Unauthorized"),s.dispatch((0,c.k)())):(console.log(e),o.ZP.error("Del Data Exception"))}))}}},10297:function(e,t,n){var r=n(1413),a=n(93433);t.Z=function(e,t){switch(t){case"level":return e.reduce((function(e,t){return[].concat((0,a.Z)(e),[{id:t.id,name:t.name,key:t.id}])}),[]);case"member":return e.members.reduce((function(e,t,n){return[].concat((0,a.Z)(e),[{no:n+1,id:t.id,name:t.name,level:t.level_name,parent:t.parent_name,level_id:t.level_id,parent_id:t.parent,key:t.id}])}),[]);case"goods":case"proxy":case"browser":case"login":case"coupon_user":case"machine":case"surfing":case"history":return e.reduce((function(e,t,n){return[].concat((0,a.Z)(e),[(0,r.Z)({no:n+1,id:t.id,key:t.id},t)])}),[]);case"job":return e.jobs.reduce((function(e,t,n){var o,i;return[].concat((0,a.Z)(e),[(0,r.Z)({no:n+1,id:t.id,key:t.id,login_user:t.login?t.login.user:"",machine_id:t.machine?t.machine.machine_id:"",proxy_ip:null===(o=t.proxy)||void 0===o?void 0:o.ip,browser_name:null===(i=t.browser)||void 0===i?void 0:i.name},t)])}),[]);case"log":return e.member_loglist.reduce((function(e,t,n){return[].concat((0,a.Z)(e),[(0,r.Z)({no:n+1,id:t.id,key:t.id,action:t.function_param,user:t.member_name,time:t.created_at},t)])}),[]);case"coupon":return e.couponsList.reduce((function(e,t,n){return[].concat((0,a.Z)(e),[{no:n+1,id:t.id,name:t.name,category_id:t.category_id,brand_id:t.brand_id,category:t.category,brand:t.brand,desc:t.desc,price:t.price,discount:t.discount,image1:t.image1,image2:t.image2,image3:t.image3,status:t.status,key:t.id}])}),[]);case"coupon_category":return e.reduce((function(e,t,n){return[].concat((0,a.Z)(e),[{id:t.id,name:t.name,image1:t.image1,image2:t.image2,image3:t.image3,status:t.status,parent_id:t.parent_id,key:t.key,children:t.children}])}),[]);case"brand":return e.reduce((function(e,t,n){return[].concat((0,a.Z)(e),[{no:n+1,id:t.id,name:t.name,image1:t.image1,image2:t.image2,image3:t.image3,key:t.id}])}),[]);default:return e}}},82464:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(87462),a=n(72791),o={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M292.7 840h438.6l24.2-512h-487z",fill:t}},{tag:"path",attrs:{d:"M864 256H736v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zm-504-72h304v72H360v-72zm371.3 656H292.7l-24.2-512h487l-24.2 512z",fill:e}}]}},name:"delete",theme:"twotone"},i=n(54291),c=function(e,t){return a.createElement(i.Z,(0,r.Z)({},e,{ref:t,icon:o}))};var d=a.forwardRef(c)},36795:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(87462),a=n(72791),o={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M761.1 288.3L687.8 215 325.1 577.6l-15.6 89 88.9-15.7z",fill:t}},{tag:"path",attrs:{d:"M880 836H144c-17.7 0-32 14.3-32 32v36c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-36c0-17.7-14.3-32-32-32zm-622.3-84c2 0 4-.2 6-.5L431.9 722c2-.4 3.9-1.3 5.3-2.8l423.9-423.9a9.96 9.96 0 000-14.1L694.9 114.9c-1.9-1.9-4.4-2.9-7.1-2.9s-5.2 1-7.1 2.9L256.8 538.8c-1.5 1.5-2.4 3.3-2.8 5.3l-29.5 168.2a33.5 33.5 0 009.4 29.8c6.6 6.4 14.9 9.9 23.8 9.9zm67.4-174.4L687.8 215l73.3 73.3-362.7 362.6-88.9 15.7 15.6-89z",fill:e}}]}},name:"edit",theme:"twotone"},i=n(54291),c=function(e,t){return a.createElement(i.Z,(0,r.Z)({},e,{ref:t,icon:o}))};var d=a.forwardRef(c)}}]);
//# sourceMappingURL=790.2b593a4d.chunk.js.map