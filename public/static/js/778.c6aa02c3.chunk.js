"use strict";(self.webpackChunkreact_e_shop=self.webpackChunkreact_e_shop||[]).push([[778],{68658:function(e,n,t){var r=t(93433),o=t(74165),c=t(15861),i=t(29439),u=t(72791),s=t(57960),a=t(31773),f=t(91082),l=t(14692),d=t(23293),h=t(36795),p=t(82464),v=t(33855),Z=t(53192),m=t(16243),x=t(71755),k=t(80184);n.Z=function(e){var n=(0,v.I0)(),t=(0,u.useState)(!1),Y=(0,i.Z)(t,2),w=Y[0],g=Y[1],j=e.columns,y=e.showAction,b=(0,v.v9)((function(e){return e.route.name})),C=(0,v.v9)((function(e){return e.auth.isLoggedIn?e.auth.user.permission:{}})),D=(0,v.v9)((function(e){return e.auth.isLoggedIn?e.auth.user.level:-1})),M=C[b]?C[b].edit:D,N=C[b]?C[b].del:D,S=(0,v.v9)((function(e){return e.search})),I=S.key,L=S.value,P=(0,v.v9)((function(e){return e.data.data})),_=(0,u.useState)(P),A=(0,i.Z)(_,2),E=A[0],T=A[1];(0,u.useEffect)((function(){I.length>0?T(P.filter((function(e){return!!e[I]&&("string"===typeof e[I]?e[I].toLowerCase().indexOf(L.toLowerCase())>-1:e[I].toString()===L)}))):T(P)}),[I,L,P]),(0,u.useEffect)((function(){if(b){g(!0);var e=function(){var e=(0,c.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n((0,Z.Nk)()),n((0,Z.Yu)(b)).then((function(){g(!1)})).catch((function(){g(!1)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n((0,x.D)()),e()}}),[n,b]);var V=[].concat((0,r.Z)(j),[{title:"Action",key:"action",fixed:"right",render:function(e){return(0,k.jsxs)(a.Z,{size:"middle",children:[1===M&&(0,k.jsx)(h.Z,{className:"cursor-pointer",onClick:function(){return t=e.key,void n((0,m.p)({id:t,title:"Edit ".concat(b),show:!0}));var t}}),(0,k.jsx)(f.Z,{placement:"left",title:"Sure to delete?",description:"All levels and members below this level will be deleted.",onConfirm:function(){return t=e.key,void(1===N?(g(!0),n((0,Z.NU)(b,{id:t})).then((function(){return g(!1)})).catch((function(){s.ZP.error("Problem"),g(!1)}))):s.ZP.open({type:"warning",content:"You have no permission"}));var t},okText:"Yes",cancelText:"No",children:1===N&&(0,k.jsx)(p.Z,{twoToneColor:"#eb2f96",className:"cursor-pointer"})})]})}}]);return(0,k.jsx)(l.Z,{spinning:w,children:(0,k.jsx)(d.Z,{columns:y?V:j,dataSource:E})})}},74778:function(e,n,t){t.r(n),t.d(n,{HistoryView:function(){return w}});var r=t(74165),o=t(15861),c=t(93433),i=t(68658),u=t(45322),s=t(66106),a=t(31773),f=t(81529),l=t(97892),d=t.n(l),h=t(6793),p=t(72426),v=t.n(p),Z=t(33855),m=t(53192),x=t(80184),k="YYYY-MM-DD",Y=u.Z.RangePicker,w=function(){var e=(0,Z.I0)(),n=f.Z.history,t=n.reduce((function(e,n){return[].concat((0,c.Z)(e),[n.key])}),[]),u=function(){var n=(0,o.Z)((0,r.Z)().mark((function n(t){var o,c;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=t[0].format(k)+" 00:00:00",c=t[1].format(k)+" 23:59:59",n.prev=2,n.next=5,e((0,m.Yu)("history","?from=".concat(o,"&to=").concat(c)));case 5:n.next=10;break;case 7:n.prev=7,n.t0=n.catch(2),console.log(n.t0);case 10:case"end":return n.stop()}}),n,null,[[2,7]])})));return function(e){return n.apply(this,arguments)}}();return(0,x.jsxs)("div",{children:[(0,x.jsx)(s.Z,{justify:"end",className:"p-2",children:(0,x.jsxs)(a.Z,{children:[(0,x.jsx)(Y,{defaultValue:[d()(v()().format("YYYY-MM-DD"),k),d()(v()().format("YYYY-MM-DD"),k)],onChange:u}),(0,x.jsx)(h.Z,{fields:t})]})}),(0,x.jsx)(i.Z,{columns:n})]})};n.default=w}}]);
//# sourceMappingURL=778.c6aa02c3.chunk.js.map