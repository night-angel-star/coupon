"use strict";(self.webpackChunkreact_e_shop=self.webpackChunkreact_e_shop||[]).push([[106],{79106:function(n,e,t){t.r(e),t.d(e,{CouponManage:function(){return S},default:function(){return E}});var r=t(93433),c=t(1413),o=t(74165),i=t(15861),u=t(29439),s=t(72791),a=t(57960),l=t(31773),d=t(60573),f=t(91082),h=t(21306),p=t(14692),Z=t(23293),m=t(36795),g=t(82464),x=t(33855),v=t(53192),j=t(16243),k=t(71755),w=t(84635),y=t(80184),C=function(n){var e=(0,x.I0)(),t=(0,s.useState)(!1),C=(0,u.Z)(t,2),I=C[0],b=C[1],L=n.columns,N=n.showAction,A=(0,x.v9)((function(n){return n.route.name})),S=(0,x.v9)((function(n){return n.auth.isLoggedIn?n.auth.user.permission:{}})),E=(0,x.v9)((function(n){return n.auth.isLoggedIn?n.auth.user.level:-1})),P=S[A]?S[A].edit:E,_=S[A]?S[A].del:E,T=(0,x.v9)((function(n){return n.search})),Y=T.key,z=T.value,D=(0,x.v9)((function(n){return n.data.data})),G=(0,s.useState)(D),M=(0,u.Z)(G,2),O=M[0],U=M[1];(0,s.useEffect)((function(){Y.length>0?U(D.filter((function(n){return!!n[Y]&&("string"===typeof n[Y]?n[Y].toLowerCase().indexOf(z.toLowerCase())>-1:n[Y].toString()===z)}))):U(D)}),[Y,z,D]),(0,s.useEffect)((function(){if(A){b(!0);var n=function(){var n=(0,i.Z)((0,o.Z)().mark((function n(){return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e((0,v.Nk)()),e((0,v.Yu)(A)).then((function(){b(!1)})).catch((function(){b(!1)}));case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();e((0,k.D)()),n()}}),[e,A]);var q=[].concat((0,r.Z)(L),[{title:"Image",key:"image",render:function(n){return(0,y.jsxs)(l.Z,{size:"small",children:[(0,y.jsx)(d.Z,{width:50,src:"".concat(w.Z,"uploads/").concat(n.image1),alt:n.image1}),n.image2&&(0,y.jsx)(d.Z,{width:50,src:"".concat(w.Z,"uploads/").concat(n.image2),alt:n.image2}),n.image3&&(0,y.jsx)(d.Z,{width:50,src:"".concat(w.Z,"uploads/").concat(n.image3),alt:n.image3})]})}},{title:"Action",key:"action",render:function(n){return(0,y.jsxs)(l.Z,{size:"middle",children:[1===P&&(0,y.jsx)(m.Z,{className:"cursor-pointer",onClick:function(){return t=n.key,void e((0,j.p)({id:t,title:"Edit ".concat(A),show:!0}));var t}}),(0,y.jsx)(f.Z,{placement:"left",title:"Sure to delete?",onConfirm:function(){return t=n.key,void(1===_?(b(!0),e((0,v.NU)(A,{id:t})).then((function(){return b(!1)})).catch((function(){a.ZP.error("Problem"),b(!1)}))):a.ZP.open({type:"warning",content:"You have no permission"}));var t},okText:"Yes",cancelText:"No",children:1===_&&(0,y.jsx)(g.Z,{twoToneColor:"#eb2f96",className:"cursor-pointer"})}),1===E&&(0,y.jsx)(h.Z,{checkedChildren:"Enable",unCheckedChildren:"Disable",checked:n.status,style:{marginLeft:"20px"},onChange:function(){return function(n){b(!0),e((0,v.Id)("coupon",(0,c.Z)((0,c.Z)({},n),{},{status:1-n.status}),!0)).then((function(){b(!1)}))}(n)}})]})}}]);return(0,y.jsx)(p.Z,{spinning:I,children:(0,y.jsx)(Z.Z,{columns:N?q:L,dataSource:O})})},I=t(66106),b=t(2641),L=t(79286),N=t(6793),A=t(81529),S=function(){var n=(0,x.I0)(),e=(0,x.v9)((function(n){return n.auth.isLoggedIn?n.auth.user.level:{}})),t=A.Z.coupon,c=t.reduce((function(n,e){return[].concat((0,r.Z)(n),[e.key])}),[]);return(0,y.jsxs)("div",{children:[(0,y.jsx)(I.Z,{justify:"end",className:"p-2",children:(0,y.jsxs)(l.Z,{children:[(0,y.jsx)(N.Z,{fields:c}),1===e&&(0,y.jsx)(b.ZP,{type:"primary",icon:(0,y.jsx)(L.Z,{}),onClick:function(){n((0,j.p)({id:0,title:"Add Goods",show:!0}))},children:"Add"})]})}),(0,y.jsx)(C,{columns:t,showAction:!0})]})},E=S}}]);
//# sourceMappingURL=106.6c6dd91c.chunk.js.map